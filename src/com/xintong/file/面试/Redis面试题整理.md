# Redis面试题

##### 1. *Redis和Mysql数据不一致解决

##### 2. *Redis数据结构

redis支持五种数据结构 string (字符串)、list (列表)、set (集合)、hash (哈希) 和 zset (有序集合)

- string（字符串）： 这个是最基本redis最基本的一个数据结构，也是我们用的最多的一个类型
- list（列表）：参考Java里的LinkedList，由一个双向链表实现，根据链表的特点，它增删快查询慢
- set（集合）：参考Java里的HashSet,同样也是无序的
- zset（有序集合）：首先它是一个set，保证了每个value的唯一性，另外他可以给每个value设置一个score而根据score排序
- hash（字典）：参考Java的HashMap，数组+链表实现

##### 3. *Redis持久化方式

1. ***RDB（snapshot快照）***：保存了某一时刻Redis内存中的数据持久化到一个rump.rdb文件中，当然这个可以设置自动，也可以手动

   - 自动：在redis.conf文件中可以配置save  num num，它的意思是说在多少秒之内产生过多少次数据变更就会触发rdb

   - 手动：可以使用sava 或者bgsave指令 但是save会发生线程阻塞，所以一般不使用，而bgsave是进行异步rdb在后台操作，所以说如果手动的话还是建议使用bgsave

     RDB特点

     另外在使用redis-cli shutdown这个指令的时候，他也会默认做一次rdb

     **优点**：1. 使用子线程持久化，不影响任何IO操作，保证了高性能

     ​			2.恢复数据的速度也比较快

     **缺点**：1. 存在数据丢失，随后一次的数据

     ​			2. 内存占用问题

   - ***AOF（Append only file）***：事实上是在aof文件中追加数据改变的指令，准确的来说是追加**RESP协议**的命令，如果要使用的话需要在redis.conf中开启，有三种策略

   - always：每次修改数据指令都会去记录，性能比较差但是数据完整性比较好

   - everysec：每秒保存一次，性能稍微好点，但是会存在数据丢失

   - no：交给操作系统决定，linux下默认是30秒记录一次

     **优点**：可以保证数据完整性

     **缺点**：恢复速度慢，文件更大，记录了每条操作语句

##### 4. 什么是RESP协议？

RESP(REdis Serialization Protocol)，直译过来是Redis的序列化协议，事实上它是redis服务端和客户端的通讯协议，特点是实现简单，容易读懂、解析高效

##### 5 *Redis单线程为什么这么快

原因有二

1. ***基于内存***：因为Redis读写基于内存，一般情况下一个请求响应的速度是用纳秒来衡量，纳秒什么概念，我们平时说的毫秒是10的-3次方，纳秒是10的-9次方
2. ***单线程***：单线程它可以避免线程上下文切换的时间

##### 7.Redis单线程如何处理客户端并发连接

1. 基于内存速度快
2. 单线程避免上下文切换时间
3. 基于IO多路复用实现并发处理

##### 8.Redis为什么是单线程，一定是单线程吗？

redis只是在处理客户端网络请求这一块使用的是单线程，其他地方并不是，我举一个简单的里，redis持久化rdb，bgsave就是重开子线程去处理持久化事件，而主线程照样运行

##### 8. Redis为什么不适用多线程

1. 多线程可能涉及到锁，一旦涉及到锁，对性能或多或少都会有影响
2. 多线程会有线程切换而消耗

##### 9.什么是IO多路复用（看视频）

多路指的是多个Socket连接，复用指的是复用同一个线程，实现多路复用可以有select、poll、epoll，而在Redis实现IO多路复用使用的是epoll

##### 10. *哨兵模式是否有了解

##### 11. Redis有哪些架构模式及其特点？

单机、主从、哨兵、集群

##### 12. 缓存击穿、缓存穿透、缓存雪崩



dubbo 服务暴露流程

首先spring容器启动之后的时候会解析dubbo：service标签或者@Service注解标注的类，然后生成一个ServiceBean，再说这个ServiceBean之前，我得先说一下

